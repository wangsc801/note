# Linux基础知识

## 文件系统

操作系统中都存在着数以千百计的文件，文件系统的作用就是对这些数量众多的文件进行组织和管理，从而及时响应用户的访问，并且使得文件不会丢失。常见的文件系统类型包括：

- FAT系列

- NTFS

- EXT系列

Linux系统中采用的是ext文件系统。EXT文件系统是一种**日志式文件系统**，使用该类型的文件系统除了保存文件的内容之外，还存储了文件的许多属性和权限，因此，在Linux系统中，一般使用节点（inode）的方式来存储文件。

对于任何系统来说，系统中的文件都存储在磁盘中。**磁盘中最小的存储单位是扇区，每一个扇区只有512个字节**。

对于现在的磁盘来说，扇区的数量是非常多的，并且不利于文件内容的存储。因此在Linux系统中实际上是按照块来进行存储的。

**一个块一般由8个连续的扇区组成**。在块中，存储着文件的创建者、创建日期、上一次的修改日期、文件的大小等基本信息，这些储存文件基本信息的区域就称为**inode**，即**索引节点**，一个索引节点对应着一个文件，索引节点的内容如下：

- 文件的大小。

- 文件创建者，使用ID表示。

- 文件的所属组。

- 文件的读、写、执行权限。

- 文件的时间属性，包括上一次inode被修改时间、文件内容上一次修改时间、上一次打开时间。

- 链接数，包括软连接和硬链接两种。文件中数据block的位置。

---

## 文件结构

| 目录名称       | 作用                                                      |
| ---------- | ------------------------------------------------------- |
| /          | 系统的根目录，包含系统中其他的所有文件                                     |
| root       | root用户的主目录，存放启动Linux系统的核心文件，如操作系统内核、引导程序Grub等           |
| home       | 普通用户的主目录，存放普通用户的个人信息。按照系统中用户的登录名而使用不同的目录文件              |
| bin        | 存放系统启动时需要执行的二进制文件                                       |
| sbin       | 可执行文件目录，存放系统管理的命令，root用户或具有root权限的用户的才能执行里面的命令，普通用户无法使用 |
| proc       | 存放Linux系统的所有内核参数以及系统的配置信息，按照进程的编号进行存取                   |
| usr        | 用户目录，存放用户文件                                             |
| boot       | 存放系统启动时需要的文件                                            |
| lib        | 存放系统需要的动态库以及核心模块                                        |
| etc        | 存放各种配置文件                                                |
| var        | 包含了运行时要改变的数据                                            |
| mnt        | 用于挂载系统之外的文件系统。需要提前创建挂载的目录                               |
| tmp        | 临时文件目录，系统启动后的临时文件均存放在/var/tmp中                          |
| lost_found | 在文件系统修复时恢复的文件，系统错误时，存放错误的内容                             |
| opt        | 通常用来安装第三方的软件包                                           |

### 比较重要的目录

#### usr

| 目录      | 作用                                               |
| ------- | ------------------------------------------------ |
| bin     | 存放用户可以直接执行的所有的命令                                 |
| sbin    | 存放与系统管理员相关的命令，如服务器的程序等，需要root用户或具有root权限的用户才可以执行 |
| include | 存放C和C ++语言的头文件，其他编程语言的相关文件在其他的目录中                |
| local   | 本地安装程序的默认安装目录                                    |
| man     | 手动生成的目录                                          |
| info    | 信息文档                                             |
| doc     | 安装包的文档信息                                         |

#### var

var目录一般包含了运行时要改变的数据，这些数据不通过网络与其他的计算机共享。

| 目录    | 作用                                        |
| ----- | ----------------------------------------- |
| local | /usr/tocal中安装程序的可变数据                      |
| lock  | 锁定文件，防止当前文件在使用时，被其他的程序修改                  |
| log   | 存储系统的各种日志文件，存储Linux系统的所有操作信息，如所有核心和系统程序信息 |
| run   | 保存到下次引导前有效的关于系统的信息文件                      |
| spool | 存储队列，涉及email、news、打印队列等                   |
| tmp   | 存储临时性文件，存储的文件比/tmp中的文件要大或存储的时间较长          |

#### etc

在etc目录中，存放着系统中的所有的配置文件，如各种服务器、网络设备、系统的操作参数等文件。

| 目录            | 作用                                            |
| ------------- | --------------------------------------------- |
| rc、rc.d或rc*.d | 存储系统的启动脚本或改变运行级别的脚本                           |
| passwd        | 系统的合法用户，包含用户名、主目录、密文形式的登录密码以及其他信息，按照一定的格式进行存储 |
| group         | 存储用户组的相关信息                                    |
| issue         | 登录提示符前的输出信息，通常包括系统的一段短说明或欢迎信息。内容由系统管理员确定      |
| shadow        | 存储用户登录密码，明文和密文相对应，使用md5算法进行加密                 |
| profile       | 创建全局变量，一般存放的是环境变量                             |
| shells        | 包含可以使用的Shell                                  |

#### proc

在proc目录中，存放着系统运行时的一些信息，如内存信息、设备信息、CPU信息等，这些信息记载着系统当前的运行状态，用户可以通过这些文件了解系统当前的运行状况，作为处理其他相关内容时的“参照”。

| 目录      | 作用                                |
| ------- | --------------------------------- |
| 1       | 存储进程init的信息，每一个进程号都有相应的目录文件存储相关信息 |
| cpuinfo | 存储CPU相关信息，如制造商、基本性能参数等            |
| devices | 存储当前运行的核心配置的设备驱动列表                |
| dma     | 显示当前使用的DMA通道                      |
| loadavg | 显示平均负载，指示系统当前的工作量                 |
| modules | 显示当前系统加载了哪些核心模块                   |
| meminfo | 存储物理内存和交换内存的实用信息                  |
| uptime  | 系统启动的时间                           |
| version | 核心版本                              |

---

## 文件类型

在Linux系统中，所有的内容都被看做文件来处理，常用的设备（如磁盘、串口等）也被当做文件来处理。

这样可以简化系统对不同设备的处理，从而提高处理的速度。

在Linux系统中，一般包括4类文件：

- 普通文件

- 目录文件

- 设备文件

- 链接文件

### 普通文件

文本文件、包括二进制文件等。

### 目录文件

就是Windows系统中的文件夹，目录文件不但包括本身的文件名以及其他的属性，还包括存储在该目录文件中子文件的名称、大小等属性。因此，对目录文件的操作不会涉及文件的内容，而只是对文件名以及存储位置等进行各种操作。

### 设备文件

用来表示Linux系统中的所有的硬件设备，这些硬件设备可以分为块设备和字符设备两种类型。块设备文件是指设备在读取时按照块为单位进行读取，如硬盘等。而字符设备则指代在读取时按照字符的顺序进行读取的设备，如键盘等。所有的设备文件都存储在/dev目录中，使用这种方式大大地方便了用户对硬件设备的直接操作。

### 链接文件

类似于Windows系统中的快捷方式，但是链接文件比快捷方式功能更加强大，链接文件实现了对不同目录、不同系统中文件的直接访问，对于不同机器上的文件也可以使用链接文件进行直接访问。链接文件按照其特性可以分为**硬链接**和**软连接**两种方式。硬链接引用的是源文件的**物理索引**，也可以称为**节点**。这就相当于为文件创建了一份备份文件，即使源文件被删除，通过硬链接文件也可以访问文件，直到所有的硬链接都被删除后，该文件才会被删除。而软连接引用的是**文件的位置**，类似于Windows系统中的快捷方式。当通过软链接访问文件时，实际上访问的还是源文件本身。当源文件被删除后，软连接文件随之失效，因此软链接又可称为**符号链接**。

硬链接只能引用同一文件系统中的文件，而软链接不但可以引用不同文件系统中的文件，还可以引用远程机器上不同文件系统中的文件。
